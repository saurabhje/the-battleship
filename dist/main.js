(()=>{"use strict";const e=function(e,t){e.innerHTML="";for(let n=0;n<100;n++){const o=document.createElement("div");o.dataset.index=n,"player"==t?(o.classList.add("cell"),o.classList.add(`h${n}`)):"yourmom"==t&&(o.classList.add("enemycell"),o.classList.add(`e${n}`)),o.innerText=`${n}`,e.appendChild(o)}},t=function(){let e=Array(100).fill(null),t=[],n=[];return{placeShip:function(n,o){let l=n.length,r=[];for(let e=1;e<l;e++)r.push(o+e);r.forEach((t=>{e[t]=n})),t.push(n)},receiveAttack:function(t){return null===e[t]?(n.push(t),!1):(e[t].hit(),!0)},allShipsSunk:function(){return t.every((e=>e.isSunk()))},missedAttacks:n}},n=function(e){let t=0;return{length:e,hit:()=>(t++,t),isSunk:()=>t===e,get hits(){return t}}};function o(e,t){if("player"===e){const e=[5,4,3,2];let o=e.length;const l=document.querySelectorAll(".cell");let r=!0,a=0;r&&l.forEach((l=>{l.addEventListener("click",(l=>{const c=l.target,i=parseInt(c.dataset.index);let u=i;const s=n(e[a]);t.placeShip(s,i);for(let t=0;t<e[a];t++)document.querySelector(`.h${u}`).style.backgroundColor="blue",u++;a++,a==o&&(r=!1)}))}))}else if("yourmom"===e){const e=[5,4,3,2];let o=e.length,l=0;for(;l<o;){let o=n(e[l]),r=Math.floor(100*Math.random()),a=r+e[l]-1,c=Math.floor(r/10);if(Math.floor(a/10)>c)continue;let i=r;t.placeShip(o,r);for(let t=0;t<e[l];t++)document.querySelector(`.e${i}`).style.backgroundColor="blue",i++;l++}}}!function(n,l){let r,a;a=t(),r=t();const c=document.getElementById("playerboard"),i=document.getElementById("compboard");e(c,"player"),e(i,"yourmom"),o("player",a),o("yourmom",r);let u=new Set,s=n,d=!1;function f(e){if(d)return;const t=e.target.dataset.index,n=r.receiveAttack(t);e.target.style.backgroundColor=!0===n?"#f70202":"#4a4848"}function h(){if(d)return;let e=Math.floor(100*Math.random());for(;u.has(e);)e=Math.floor(100*Math.random());const t=a.receiveAttack(e);c.querySelector(`[data-index='${e}']`).style.backgroundColor=!0===t?"#f70202":"#4a4848",u.add(e),y(),s=m()}function m(){return s=s===n?l:n}function y(){return a.allShipsSunk()?(d=!0,console.log("Game over! Computer won!"),void i.removeEventListener("click",f)):r.allShipsSunk()?(d=!0,void console.log("Game over! Player won!")):void 0}i.addEventListener("click",(e=>{s!==n||d||(f(e),y(),s=m(),setTimeout(h,500))}))}({name:"player1"},{name:"player2"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1pmLEVBQWFnQixvQkFBb0IsUUFBU1gsSUFHeENULEVBQVUxQixnQkFDWmtDLEdBQVcsT0FDWFUsUUFBUUMsSUFBSSxnQ0FGZCxDQUtGLENBM0RBZixFQUFhcEIsaUJBQWlCLFNBQVVxQyxJQUNsQ2QsSUFBa0JULEdBQVdVLElBR2pDQyxFQUFZWSxHQUNaTCxJQUNBVCxFQUFnQlUsSUFDaEJLLFdBQVdWLEVBQWMsS0FBSSxHQXFEakMsQ0M3RUEsQ0FBUyxDQUFDVyxLQUFNLFdBQVksQ0FBQ0EsS0FBTSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvRE9NLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9zaGlwLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L3BsYWNlc2hpcHMuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvZ2FtZWxvb3AuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZG9NID0gKCgpPT57XHJcbiAgICBmdW5jdGlvbiByZW5kZXJCb2FyZChib2FyZEVsZW1lbnQsIGhvbGRlcikge1xyXG4gICAgICAgIGJvYXJkRWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY2VsbC5kYXRhc2V0LmluZGV4ID0gaTtcclxuICAgICAgICAgICAgaWYoaG9sZGVyID09IFwicGxheWVyXCIpe1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoYGgke2l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihob2xkZXIgPT0gXCJ5b3VybW9tXCIpe1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdlbmVteWNlbGwnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChgZSR7aX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjZWxsLmlubmVyVGV4dCA9IGAke2l9YDtcclxuICAgICAgICAgICAgYm9hcmRFbGVtZW50LmFwcGVuZENoaWxkKGNlbGwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZW5kZXJCb2FyZFxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRvTSIsImltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcclxuZnVuY3Rpb24gR2FtZWJvYXJkKCkge1xyXG4gIGxldCBib2FyZCA9IEFycmF5KDEwMCkuZmlsbChudWxsKTtcclxuICBsZXQgc2hpcHMgPSBbXTtcclxuICBsZXQgbWlzc2VkQXR0YWNrcyA9IFtdO1xyXG5cclxuICBmdW5jdGlvbiBwbGFjZVNoaXAoc2hpcCxpbmRleCkge1xyXG4gICAgbGV0IHNoaXBsZW5ndGggPSBzaGlwLmxlbmd0aDtcclxuICAgIGxldCBjb29yZGluYXRlcyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTE7aTxzaGlwbGVuZ3RoO2krKyl7XHJcbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goaW5kZXgraSk7XHJcbiAgICB9XHJcbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICAgICAgYm9hcmRbY29vcmRdID0gc2hpcDtcclxuICAgIH0pO1xyXG4gICAgc2hpcHMucHVzaChzaGlwKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpIHtcclxuICAgIGlmIChib2FyZFtjb29yZGluYXRlc10gPT09IG51bGwpIHtcclxuICAgICAgbWlzc2VkQXR0YWNrcy5wdXNoKGNvb3JkaW5hdGVzKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGl0U2hpcCA9IGJvYXJkW2Nvb3JkaW5hdGVzXTtcclxuICAgIGhpdFNoaXAuaGl0KCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFsbFNoaXBzU3VuaygpIHtcclxuICAgIHJldHVybiBzaGlwcy5ldmVyeShzaGlwID0+IHNoaXAuaXNTdW5rKCkpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHBsYWNlU2hpcCxcclxuICAgIHJlY2VpdmVBdHRhY2ssXHJcbiAgICBhbGxTaGlwc1N1bmssXHJcbiAgICBtaXNzZWRBdHRhY2tzLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDsiLCJmdW5jdGlvbiBTaGlwKGxlbmd0aCkge1xyXG4gIGxldCBoaXRzID0gMDtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxlbmd0aDogbGVuZ3RoLFxyXG4gICAgaGl0KCkge1xyXG4gICAgICBoaXRzKytcclxuICAgICAgcmV0dXJuIGhpdHM7XHJcbiAgICB9LFxyXG4gICAgaXNTdW5rKCkge1xyXG4gICAgICByZXR1cm4gaGl0cyA9PT0gbGVuZ3RoO1xyXG4gICAgfSxcclxuICAgIGdldCBoaXRzKCl7XHJcbiAgICAgIHJldHVybiBoaXRzO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgU2hpcDsiLCJpbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcblxyXG5mdW5jdGlvbiBwbGFjZXNoaXBzKGhvbGRlciwgYm9hcmQpIHtcclxuICBpZiAoaG9sZGVyID09PSBcInBsYXllclwiKSB7XHJcbiAgICBjb25zdCBzaGlwc0xlbmd0aCA9IFs1LCA0LCAzLCAyXTtcclxuICAgIGxldCBzaGlwc2xlbiA9IHNoaXBzTGVuZ3RoLmxlbmd0aDtcclxuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcclxuICAgIGxldCBnYW1lID0gdHJ1ZTtcclxuICAgIGxldCBpID0gMDtcclxuXHJcbiAgICBpZiAoZ2FtZSkge1xyXG4gICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNlbGwgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGNlbGwuZGF0YXNldC5pbmRleCk7XHJcbiAgICAgICAgICBsZXQgdGVtcCA9IGluZGV4O1xyXG4gICAgICAgICAgY29uc3Qgc2hpcCA9IFNoaXAoc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICAgICAgYm9hcmQucGxhY2VTaGlwKHNoaXAsIGluZGV4KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzaGlwc0xlbmd0aFtpXTsgaysrKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5oJHt0ZW1wfWApLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibHVlJztcclxuICAgICAgICAgICAgdGVtcCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpKys7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChpID09IHNoaXBzbGVuKSB7XHJcbiAgICAgICAgICAgIGdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBcclxuICBlbHNlIGlmIChob2xkZXIgPT09IFwieW91cm1vbVwiKSB7XHJcbiAgICBjb25zdCBzaGlwc0xlbmd0aCA9IFs1LCA0LCAzLCAyXTtcclxuICAgIGxldCBzaGlwc2xlbiA9IHNoaXBzTGVuZ3RoLmxlbmd0aDtcclxuICAgIGxldCBpID0gMDtcclxuICAgIFxyXG4gICAgd2hpbGUgKGkgPCBzaGlwc2xlbikge1xyXG4gICAgICBsZXQgc2hpcCA9IFNoaXAoc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgICBsZXQgbGFzdENlbGxJbmRleCA9IGluZGV4ICsgc2hpcHNMZW5ndGhbaV0gLSAxO1xyXG4gICAgICBsZXQgaW5kZXhyb3cgPSBNYXRoLmZsb29yKGluZGV4IC8gMTApO1xyXG4gICAgICBsZXQgbGFzdHJvdyA9IE1hdGguZmxvb3IobGFzdENlbGxJbmRleCAvIDEwKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsYXN0cm93ID4gaW5kZXhyb3cpIHsgLy8gQ2hlY2sgaWYgdGhlIHNoaXAgaXMgb3ZlcmZsb3dpbmdcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbGV0IHRlbXAgPSBpbmRleDtcclxuICAgICAgYm9hcmQucGxhY2VTaGlwKHNoaXAsIGluZGV4KTtcclxuICAgICAgXHJcbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc2hpcHNMZW5ndGhbaV07IGsrKykge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5lJHt0ZW1wfWApLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibHVlJztcclxuICAgICAgICB0ZW1wKys7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGkrKzsgXHJcbiAgICB9ICAgICBcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IHBsYWNlc2hpcHMgfVxyXG4iLCJpbXBvcnQgUGxheWVycyBmcm9tIFwiLi9wbGF5ZXJcIjtcclxuaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xyXG5pbXBvcnQgZG9NIGZyb20gXCIuL0RPTVwiO1xyXG5pbXBvcnQgeyBwbGFjZXNoaXBzIH0gZnJvbSBcIi4vcGxhY2VzaGlwc1wiO1xyXG5cclxuZnVuY3Rpb24gZ2FtZUxvb3AocGxheWVyMSwgcGxheWVyMikge1xyXG4gIGxldCBjb21wYm9hcmQsIHBsYXllcmJvYXJkO1xyXG4gIHBsYXllcmJvYXJkID0gR2FtZWJvYXJkKCk7XHJcbiAgY29tcGJvYXJkID0gR2FtZWJvYXJkKCk7XHJcbiAgY29uc3QgcGxheWVyMWJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJib2FyZFwiKTtcclxuICBjb25zdCBwbGF5ZXIyYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBib2FyZFwiKTtcclxuICBkb00ucmVuZGVyQm9hcmQocGxheWVyMWJvYXJkLFwicGxheWVyXCIpO1xyXG4gIGRvTS5yZW5kZXJCb2FyZChwbGF5ZXIyYm9hcmQsIFwieW91cm1vbVwiKTtcclxuXHJcblxyXG4gIHBsYWNlc2hpcHMoXCJwbGF5ZXJcIixwbGF5ZXJib2FyZCk7XHJcbiAgcGxhY2VzaGlwcyhcInlvdXJtb21cIixjb21wYm9hcmQpO1xyXG5cclxuIFxyXG4gIGxldCBwcmV2aW91c0F0dGFjayA9IG5ldyBTZXQoKTsgLy90byBwcmV2ZW50IHRoZSBjb21wIGZyb20gYXR0YWNraW5nIHRoZSBzYW1lIGluZGV4IHR3aWNlXHJcbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXIxO1xyXG4gIGxldCBnYW1lT3ZlciA9IGZhbHNlO1xyXG5cclxuICBwbGF5ZXIyYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoY3VycmVudFBsYXllciAhPT0gcGxheWVyMSB8fCBnYW1lT3Zlcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBoYW5kbGVDbGljayhlKTtcclxuICAgIGNoZWNrZ2FtZU92ZXIoKTtcclxuICAgIGN1cnJlbnRQbGF5ZXIgPSBzd2l0Y2hQbGF5ZXIoKTtcclxuICAgIHNldFRpbWVvdXQoY29tcHV0ZXJUdXJuLCA1MDApO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNlbGxpbmRleCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29tcGJvYXJkLnJlY2VpdmVBdHRhY2soY2VsbGluZGV4KTtcclxuICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y3MDIwMlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcHV0ZXJUdXJuKCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuICAgIHdoaWxlKHByZXZpb3VzQXR0YWNrLmhhcyh4KSl7XHJcbiAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29tcGhpdCA9IHBsYXllcmJvYXJkLnJlY2VpdmVBdHRhY2soeCk7XHJcbiAgICBjb25zdCBjZWxsID0gcGxheWVyMWJvYXJkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PScke3h9J11gKTtcclxuICAgIGlmIChjb21waGl0ID09PSB0cnVlKSB7XHJcbiAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjcwMjAyXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gICAgcHJldmlvdXNBdHRhY2suYWRkKHgpO1xyXG4gICAgY2hlY2tnYW1lT3ZlcigpO1xyXG4gICAgY3VycmVudFBsYXllciA9IHN3aXRjaFBsYXllcigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3dpdGNoUGxheWVyKCkge1xyXG4gICAgcmV0dXJuIChjdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllciA9PT0gcGxheWVyMSA/IHBsYXllcjIgOiBwbGF5ZXIxKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrZ2FtZU92ZXIoKSB7XHJcbiAgICBpZiAocGxheWVyYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkdhbWUgb3ZlciEgQ29tcHV0ZXIgd29uIVwiKTtcclxuICAgICAgcGxheWVyMmJvYXJkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGljayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChjb21wYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkdhbWUgb3ZlciEgUGxheWVyIHdvbiFcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVMb29wO1xyXG4iLCJpbXBvcnQgZG9NIGZyb20gXCIuL0RPTVwiO1xyXG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xyXG5pbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL2dhbWVib2FyZFwiO1xyXG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCBnYW1lTG9vcCBmcm9tIFwiLi9nYW1lbG9vcFwiO1xyXG5cclxuXHJcbmdhbWVMb29wKHtuYW1lOiBcInBsYXllcjFcIn0sIHtuYW1lOiBcInBsYXllcjJcIn0pO1xyXG4iXSwibmFtZXMiOlsiYm9hcmRFbGVtZW50IiwiaG9sZGVyIiwiaW5uZXJIVE1MIiwiaSIsImNlbGwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsImJvYXJkIiwiQXJyYXkiLCJmaWxsIiwic2hpcHMiLCJtaXNzZWRBdHRhY2tzIiwicGxhY2VTaGlwIiwic2hpcCIsInNoaXBsZW5ndGgiLCJsZW5ndGgiLCJjb29yZGluYXRlcyIsInB1c2giLCJmb3JFYWNoIiwiY29vcmQiLCJyZWNlaXZlQXR0YWNrIiwiaGl0IiwiYWxsU2hpcHNTdW5rIiwiZXZlcnkiLCJpc1N1bmsiLCJoaXRzIiwicGxhY2VzaGlwcyIsInNoaXBzTGVuZ3RoIiwic2hpcHNsZW4iLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwicGFyc2VJbnQiLCJ0ZW1wIiwiayIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxhc3RDZWxsSW5kZXgiLCJpbmRleHJvdyIsInBsYXllcjEiLCJwbGF5ZXIyIiwiY29tcGJvYXJkIiwicGxheWVyYm9hcmQiLCJwbGF5ZXIxYm9hcmQiLCJnZXRFbGVtZW50QnlJZCIsInBsYXllcjJib2FyZCIsInByZXZpb3VzQXR0YWNrIiwiU2V0IiwiY3VycmVudFBsYXllciIsImdhbWVPdmVyIiwiaGFuZGxlQ2xpY2siLCJjZWxsaW5kZXgiLCJyZXN1bHQiLCJjb21wdXRlclR1cm4iLCJ4IiwiaGFzIiwiY29tcGhpdCIsImNoZWNrZ2FtZU92ZXIiLCJzd2l0Y2hQbGF5ZXIiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJzZXRUaW1lb3V0IiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=