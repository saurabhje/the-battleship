(()=>{"use strict";const e=function(e,t){e.innerHTML="";for(let n=0;n<100;n++){const o=document.createElement("div");o.dataset.index=n,"player"==t?(o.classList.add("cell"),o.classList.add(`h${n}`)):"computer"==t&&(o.classList.add("enemycell"),o.classList.add(`e${n}`)),o.innerText=`${n}`,e.appendChild(o)}},t=function(){let e=Array(100).fill(null),t=[],n=[];return{board:e,getBoard:function(){return e},placeShip:function(n,o){let r=n.length,l=[];for(let e=0;e<r;e++)l.push(o+e);l.forEach((t=>{e[t]=n})),t.push(n)},receiveAttack:function(t){return null===e[t]?(n.push(t),!1):(e[t].hit(),!0)},allShipsSunk:function(){return t.every((e=>e.isSunk()))},missedAttacks:n}},n=function(e){let t=0;return{length:e,hit:()=>(t++,t),isSunk:()=>t===e,get hits(){return t}}};function o(e,t){if("player"===e){const e=[5,4,3,2];let o=e.length;const l=document.querySelectorAll(".cell");let c=!0,a=0;c&&l.forEach((l=>{l.addEventListener("click",(l=>{const u=l.target,i=parseInt(u.dataset.index),s=function(e,t,n){const o=e.getBoard();for(let e=0;e<n;e++)if(null!==o[t+e])return!1;return!0}(t,i,e[a]),d=r(i,e[a]);if(s&&d){console.log(t.board);const r=n(e[a]);t.placeShip(r,i);for(let t=0;t<e[a];t++)document.querySelector(`.h${i+t}`).style.backgroundColor="blue";a++,a===o&&(c=!1)}}))}))}else if("computer"===e){const e=[5,4,3,2];let o=e.length,l=0;for(;l<o;){let o=n(e[l]),c=Math.floor(100*Math.random());if(!r(c,e[l]))continue;let a=c;t.placeShip(o,c);for(let t=0;t<e[l];t++)document.querySelector(`.e${a}`).style.backgroundColor="blue",a++;l++}}}function r(e,t){let n=e+t-1,o=Math.floor(e/10);return!(Math.floor(n/10)>o)}!function(n,r){let l,c;c=t(),l=t();const a=document.getElementById("playerboard"),u=document.getElementById("compboard");e(a,"player"),e(u,"computer"),o("player",c),o("computer",l);let i=new Set,s=n,d=!1;function f(e){if(d)return;const t=e.target.dataset.index,n=l.receiveAttack(t);e.target.style.backgroundColor=!0===n?"#f70202":"#4a4848"}function h(){if(d)return;let e=Math.floor(100*Math.random());for(;i.has(e);)e=Math.floor(100*Math.random());const t=c.receiveAttack(e);a.querySelector(`[data-index='${e}']`).style.backgroundColor=!0===t?"#f70202":"#4a4848",i.add(e),p(),s=m()}function m(){return s=s===n?r:n}function p(){return c.allShipsSunk()?(d=!0,console.log("Game over! Computer won!"),void u.removeEventListener("click",f)):l.allShipsSunk()?(d=!0,void console.log("Game over! Player won!")):void 0}u.addEventListener("click",(e=>{s!==n||d||(f(e),p(),s=m(),setTimeout(h,500))}))}({name:"Player"},{name:"Computer"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGLE9BRUYsSUFBSUssRUFBSXBCLEtBQUtDLE1BQXNCLElBQWhCRCxLQUFLRSxVQUN4QixLQUFNVSxFQUFlUyxJQUFJRCxJQUN2QkEsRUFBSXBCLEtBQUtDLE1BQXNCLElBQWhCRCxLQUFLRSxVQUV0QixNQUFNb0IsRUFBVTNDLEVBQVlQLGNBQWNnRCxHQUM3QlgsRUFBYVosY0FBYyxnQkFBZ0J1QixPQUVqRHRCLE1BQU1DLGlCQURHLElBQVp1QixFQUMyQixVQUVBLFVBRS9CVixFQUFlekQsSUFBSWlFLEdBQ25CRyxJQUNBVCxFQUFnQlUsR0FDbEIsQ0FFQSxTQUFTQSxJQUNQLE9BQVFWLEVBQWdCQSxJQUFrQlIsRUFBVUMsRUFBVUQsQ0FDaEUsQ0FFQSxTQUFTaUIsSUFDUCxPQUFJNUMsRUFBWUwsZ0JBQ2R5QyxHQUFXLEVBQ1hyQixRQUFRQyxJQUFJLGlDQUNaZ0IsRUFBYWMsb0JBQW9CLFFBQVNULElBR3hDUixFQUFVbEMsZ0JBQ1p5QyxHQUFXLE9BQ1hyQixRQUFRQyxJQUFJLGdDQUZkLENBS0YsQ0EzREFnQixFQUFhMUIsaUJBQWlCLFNBQVV5QyxJQUNsQ1osSUFBa0JSLEdBQVdTLElBR2pDQyxFQUFZVSxHQUNaSCxJQUNBVCxFQUFnQlUsSUFDaEJHLFdBQVdSLEVBQWMsS0FBSSxHQXFEakMsQ0M5RUEsQ0FBUyxDQUFDUyxLQUFNLFVBQVcsQ0FBQ0EsS0FBTSxZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvRE9NLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9zaGlwLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L3BsYWNlc2hpcHMuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvZ2FtZWxvb3AuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZG9NID0gKCgpPT57XHJcbiAgICBmdW5jdGlvbiByZW5kZXJCb2FyZChib2FyZEVsZW1lbnQsIGhvbGRlcikge1xyXG4gICAgICAgIGJvYXJkRWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY2VsbC5kYXRhc2V0LmluZGV4ID0gaTtcclxuICAgICAgICAgICAgaWYoaG9sZGVyID09IFwicGxheWVyXCIpe1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoYGgke2l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihob2xkZXIgPT0gXCJjb21wdXRlclwiKXtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZW5lbXljZWxsJyk7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoYGUke2l9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2VsbC5pbm5lclRleHQgPSBgJHtpfWA7XHJcbiAgICAgICAgICAgIGJvYXJkRWxlbWVudC5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVuZGVyQm9hcmRcclxuICAgIH1cclxufSkoKTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBkb00iLCJpbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmZ1bmN0aW9uIEdhbWVib2FyZCgpIHtcclxuICBsZXQgYm9hcmQgPSBBcnJheSgxMDApLmZpbGwobnVsbCk7XHJcbiAgbGV0IHNoaXBzID0gW107XHJcbiAgbGV0IG1pc3NlZEF0dGFja3MgPSBbXTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcChzaGlwLGluZGV4KSB7XHJcbiAgICBsZXQgc2hpcGxlbmd0aCA9IHNoaXAubGVuZ3RoO1xyXG4gICAgbGV0IGNvb3JkaW5hdGVzID0gW107XHJcbiAgICBmb3IobGV0IGk9MDtpPHNoaXBsZW5ndGg7aSsrKXtcclxuICAgICAgY29vcmRpbmF0ZXMucHVzaChpbmRleCtpKTtcclxuICAgIH1cclxuICAgIGNvb3JkaW5hdGVzLmZvckVhY2goY29vcmQgPT4ge1xyXG4gICAgICBib2FyZFtjb29yZF0gPSBzaGlwO1xyXG4gICAgfSk7XHJcbiAgICBzaGlwcy5wdXNoKHNoaXApO1xyXG5cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gcmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcykge1xyXG4gICAgaWYgKGJvYXJkW2Nvb3JkaW5hdGVzXSA9PT0gbnVsbCkge1xyXG4gICAgICBtaXNzZWRBdHRhY2tzLnB1c2goY29vcmRpbmF0ZXMpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoaXRTaGlwID0gYm9hcmRbY29vcmRpbmF0ZXNdO1xyXG4gICAgaGl0U2hpcC5oaXQoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWxsU2hpcHNTdW5rKCkge1xyXG4gICAgcmV0dXJuIHNoaXBzLmV2ZXJ5KHNoaXAgPT4gc2hpcC5pc1N1bmsoKSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGdldEJvYXJkKCl7XHJcbiAgICByZXR1cm4gYm9hcmQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYm9hcmQsXHJcbiAgICBnZXRCb2FyZCxcclxuICAgIHBsYWNlU2hpcCxcclxuICAgIHJlY2VpdmVBdHRhY2ssXHJcbiAgICBhbGxTaGlwc1N1bmssXHJcbiAgICBtaXNzZWRBdHRhY2tzLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDsiLCJmdW5jdGlvbiBTaGlwKGxlbmd0aCkge1xyXG4gIGxldCBoaXRzID0gMDtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxlbmd0aDogbGVuZ3RoLFxyXG4gICAgaGl0KCkge1xyXG4gICAgICBoaXRzKytcclxuICAgICAgcmV0dXJuIGhpdHM7XHJcbiAgICB9LFxyXG4gICAgaXNTdW5rKCkge1xyXG4gICAgICByZXR1cm4gaGl0cyA9PT0gbGVuZ3RoO1xyXG4gICAgfSxcclxuICAgIGdldCBoaXRzKCl7XHJcbiAgICAgIHJldHVybiBoaXRzO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgU2hpcDsiLCJpbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcblxyXG5mdW5jdGlvbiBwbGFjZXNoaXBzKGhvbGRlciwgcGxheWVyYm9hcmQpIHtcclxuICBpZiAoaG9sZGVyID09PSBcInBsYXllclwiKSB7XHJcbiAgICBjb25zdCBzaGlwc0xlbmd0aCA9IFs1LCA0LCAzLCAyXTtcclxuICAgIGxldCBzaGlwc2xlbiA9IHNoaXBzTGVuZ3RoLmxlbmd0aDtcclxuICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcclxuICAgIGxldCBnYW1lID0gdHJ1ZTtcclxuICAgIGxldCBpID0gMDtcclxuXHJcbiAgICBpZiAoZ2FtZSkge1xyXG4gICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xyXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNlbGwgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGNlbGwuZGF0YXNldC5pbmRleCk7XHJcbiAgICAgICAgICBjb25zdCBjYW5QbGFjZVNoaXAgPSBjaGVja1NoaXBQbGFjZW1lbnQocGxheWVyYm9hcmQsIGluZGV4LCBzaGlwc0xlbmd0aFtpXSk7XHJcbiAgICAgICAgICBjb25zdCBub092ZXJsYXAgPSBjaGVja092ZXJsYXAoaW5kZXgsIHNoaXBzTGVuZ3RoW2ldKTtcclxuXHJcbiAgICAgICAgICBpZiAoY2FuUGxhY2VTaGlwICYmIG5vT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXJib2FyZC5ib2FyZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoaXAgPSBTaGlwKHNoaXBzTGVuZ3RoW2ldKTtcclxuICAgICAgICAgICAgcGxheWVyYm9hcmQucGxhY2VTaGlwKHNoaXAsIGluZGV4KTsgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHNoaXBzTGVuZ3RoW2ldOyBrKyspIHtcclxuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaCR7aW5kZXggKyBrfWApLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibHVlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGlmIChpID09PSBzaGlwc2xlbikge1xyXG4gICAgICAgICAgICAgIGdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGhvbGRlciA9PT0gXCJjb21wdXRlclwiKSB7XHJcbiAgICBjb25zdCBzaGlwc0xlbmd0aCA9IFs1LCA0LCAzLCAyXTtcclxuICAgIGxldCBzaGlwc2xlbiA9IHNoaXBzTGVuZ3RoLmxlbmd0aDtcclxuICAgIGxldCBpID0gMDtcclxuICAgIFxyXG4gICAgd2hpbGUgKGkgPCBzaGlwc2xlbikge1xyXG4gICAgICBsZXQgc2hpcCA9IFNoaXAoc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgICBjb25zdCBub092ZXJsYXAgPSBjaGVja092ZXJsYXAoaW5kZXgsIHNoaXBzTGVuZ3RoW2ldKTtcclxuXHJcbiAgICAgIGlmICghbm9PdmVybGFwKSB7IC8vIENoZWNrIGlmIHRoZSBzaGlwIGlzIG92ZXJsYXBwaW5nXHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxldCB0ZW1wID0gaW5kZXg7XHJcbiAgICAgIHBsYXllcmJvYXJkLnBsYWNlU2hpcChzaGlwLCBpbmRleCk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IHNoaXBzTGVuZ3RoW2ldOyBrKyspIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZSR7dGVtcH1gKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmx1ZSc7XHJcbiAgICAgICAgdGVtcCsrO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpKys7IFxyXG4gICAgfSAgICAgXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja092ZXJsYXAoc3RhcnRJbmRleCwgbGVuZ3RoKSB7XHJcbiAgbGV0IGxhc3RDZWxsSW5kZXggPSBzdGFydEluZGV4ICsgbGVuZ3RoIC0gMTtcclxuICBsZXQgaW5kZXhyb3cgPSBNYXRoLmZsb29yKHN0YXJ0SW5kZXggLyAxMCk7XHJcbiAgbGV0IGxhc3Ryb3cgPSBNYXRoLmZsb29yKGxhc3RDZWxsSW5kZXggLyAxMCk7XHJcbiAgXHJcbiAgaWYgKGxhc3Ryb3cgPiBpbmRleHJvdykge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tTaGlwUGxhY2VtZW50KHBsYXllcmJvYXJkLCBzdGFydEluZGV4LCBsZW5ndGgpIHtcclxuICBjb25zdCBib2FyZCA9IHBsYXllcmJvYXJkLmdldEJvYXJkKCk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IHN0YXJ0SW5kZXggKyBpO1xyXG5cclxuICAgIGlmIChib2FyZFtpbmRpY2VzXSAhPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgeyBwbGFjZXNoaXBzIH07XHJcbiIsImltcG9ydCBQbGF5ZXJzIGZyb20gXCIuL3BsYXllclwiO1xyXG5pbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL2dhbWVib2FyZFwiO1xyXG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCBkb00gZnJvbSBcIi4vRE9NXCI7XHJcbmltcG9ydCB7IHBsYWNlc2hpcHMgfSBmcm9tIFwiLi9wbGFjZXNoaXBzXCI7XHJcblxyXG5mdW5jdGlvbiBnYW1lTG9vcChwbGF5ZXIxLCBwbGF5ZXIyKSB7XHJcbiAgbGV0IGNvbXBib2FyZCwgcGxheWVyYm9hcmQ7XHJcbiAgcGxheWVyYm9hcmQgPSBHYW1lYm9hcmQoKTtcclxuICBjb21wYm9hcmQgPSBHYW1lYm9hcmQoKTtcclxuICBjb25zdCBwbGF5ZXIxYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllcmJvYXJkXCIpO1xyXG4gIGNvbnN0IHBsYXllcjJib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGJvYXJkXCIpO1xyXG4gIGRvTS5yZW5kZXJCb2FyZChwbGF5ZXIxYm9hcmQsXCJwbGF5ZXJcIik7XHJcbiAgZG9NLnJlbmRlckJvYXJkKHBsYXllcjJib2FyZCwgXCJjb21wdXRlclwiKTtcclxuXHJcblxyXG4gIHBsYWNlc2hpcHMoXCJwbGF5ZXJcIixwbGF5ZXJib2FyZCk7XHJcbiAgcGxhY2VzaGlwcyhcImNvbXB1dGVyXCIsY29tcGJvYXJkKTtcclxuXHJcbiBcclxuICBsZXQgcHJldmlvdXNBdHRhY2sgPSBuZXcgU2V0KCk7IC8vdG8gcHJldmVudCB0aGUgY29tcCBmcm9tIGF0dGFja2luZyB0aGUgc2FtZSBpbmRleCB0d2ljZVxyXG4gIGxldCBjdXJyZW50UGxheWVyID0gcGxheWVyMTtcclxuICBsZXQgZ2FtZU92ZXIgPSBmYWxzZTtcclxuXHJcbiBcclxuICBwbGF5ZXIyYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoY3VycmVudFBsYXllciAhPT0gcGxheWVyMSB8fCBnYW1lT3Zlcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBoYW5kbGVDbGljayhlKTtcclxuICAgIGNoZWNrZ2FtZU92ZXIoKTtcclxuICAgIGN1cnJlbnRQbGF5ZXIgPSBzd2l0Y2hQbGF5ZXIoKTtcclxuICAgIHNldFRpbWVvdXQoY29tcHV0ZXJUdXJuLCA1MDApO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNlbGxpbmRleCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29tcGJvYXJkLnJlY2VpdmVBdHRhY2soY2VsbGluZGV4KTtcclxuICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y3MDIwMlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcHV0ZXJUdXJuKCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuICAgIHdoaWxlKHByZXZpb3VzQXR0YWNrLmhhcyh4KSl7XHJcbiAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29tcGhpdCA9IHBsYXllcmJvYXJkLnJlY2VpdmVBdHRhY2soeCk7XHJcbiAgICBjb25zdCBjZWxsID0gcGxheWVyMWJvYXJkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PScke3h9J11gKTtcclxuICAgIGlmIChjb21waGl0ID09PSB0cnVlKSB7XHJcbiAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjcwMjAyXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gICAgcHJldmlvdXNBdHRhY2suYWRkKHgpO1xyXG4gICAgY2hlY2tnYW1lT3ZlcigpO1xyXG4gICAgY3VycmVudFBsYXllciA9IHN3aXRjaFBsYXllcigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3dpdGNoUGxheWVyKCkge1xyXG4gICAgcmV0dXJuIChjdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllciA9PT0gcGxheWVyMSA/IHBsYXllcjIgOiBwbGF5ZXIxKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrZ2FtZU92ZXIoKSB7XHJcbiAgICBpZiAocGxheWVyYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkdhbWUgb3ZlciEgQ29tcHV0ZXIgd29uIVwiKTtcclxuICAgICAgcGxheWVyMmJvYXJkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGljayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChjb21wYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkdhbWUgb3ZlciEgUGxheWVyIHdvbiFcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVMb29wO1xyXG4iLCJpbXBvcnQgZG9NIGZyb20gXCIuL0RPTVwiO1xyXG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xyXG5pbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL2dhbWVib2FyZFwiO1xyXG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCBnYW1lTG9vcCBmcm9tIFwiLi9nYW1lbG9vcFwiO1xyXG5cclxuXHJcbmdhbWVMb29wKHtuYW1lOiBcIlBsYXllclwifSwge25hbWU6IFwiQ29tcHV0ZXJcIn0pO1xyXG4iXSwibmFtZXMiOlsiYm9hcmRFbGVtZW50IiwiaG9sZGVyIiwiaW5uZXJIVE1MIiwiaSIsImNlbGwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkYXRhc2V0IiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsImJvYXJkIiwiQXJyYXkiLCJmaWxsIiwic2hpcHMiLCJtaXNzZWRBdHRhY2tzIiwiZ2V0Qm9hcmQiLCJwbGFjZVNoaXAiLCJzaGlwIiwic2hpcGxlbmd0aCIsImxlbmd0aCIsImNvb3JkaW5hdGVzIiwicHVzaCIsImZvckVhY2giLCJjb29yZCIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJhbGxTaGlwc1N1bmsiLCJldmVyeSIsImlzU3VuayIsImhpdHMiLCJwbGFjZXNoaXBzIiwicGxheWVyYm9hcmQiLCJzaGlwc0xlbmd0aCIsInNoaXBzbGVuIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZ2FtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsInBhcnNlSW50IiwiY2FuUGxhY2VTaGlwIiwic3RhcnRJbmRleCIsImNoZWNrU2hpcFBsYWNlbWVudCIsIm5vT3ZlcmxhcCIsImNoZWNrT3ZlcmxhcCIsImNvbnNvbGUiLCJsb2ciLCJrIiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidGVtcCIsImxhc3RDZWxsSW5kZXgiLCJpbmRleHJvdyIsInBsYXllcjEiLCJwbGF5ZXIyIiwiY29tcGJvYXJkIiwicGxheWVyMWJvYXJkIiwiZ2V0RWxlbWVudEJ5SWQiLCJwbGF5ZXIyYm9hcmQiLCJwcmV2aW91c0F0dGFjayIsIlNldCIsImN1cnJlbnRQbGF5ZXIiLCJnYW1lT3ZlciIsImhhbmRsZUNsaWNrIiwiY2VsbGluZGV4IiwicmVzdWx0IiwiY29tcHV0ZXJUdXJuIiwieCIsImhhcyIsImNvbXBoaXQiLCJjaGVja2dhbWVPdmVyIiwic3dpdGNoUGxheWVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJzZXRUaW1lb3V0IiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=