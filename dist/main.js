(()=>{"use strict";const e=function(e,t){e.innerHTML="";for(let n=0;n<100;n++){const r=document.createElement("div");r.dataset.index=n,"player"==t?(r.classList.add("cell"),r.classList.add(`h${n}`)):"computer"==t&&(r.classList.add("enemycell"),r.classList.add(`e${n}`)),e.appendChild(r)}},t=function(){let e=Array(100).fill(null),t=[],n=[];return{board:e,getBoard:function(){return e},placeShip:function(n,r){let o=n.length,l=[];for(let e=0;e<o;e++)l.push(r+e);l.forEach((t=>{e[t]=n})),t.push(n)},receiveAttack:function(t){return null===e[t]?(n.push(t),!1):(e[t].hit(),!0)},allShipsSunk:function(){return console.log(t.every((e=>e.isSunk()))),t.every((e=>e.isSunk()))},missedAttacks:n}},n=function(e){let t=0;return{length:e,hit:()=>(t++,t),isSunk:()=>t===e,get hits(){return t}}};function r(e,t){if("player"===e){const e=[5,4,3,2];let r=e.length;const l=document.querySelectorAll(".cell");let c=!0,a=0;const u=document.getElementById("turn");console.log(a),c&&l.forEach((l=>{l.addEventListener("click",(l=>{const i=l.target,d=parseInt(i.dataset.index),s=function(e,t,n){const r=e.getBoard();for(let e=0;e<n;e++)if(null!==r[t+e])return!1;return!0}(t,d,e[a]),f=o(d,e[a]);if(u.innerText=0==a?"Place your Submarine":1==a?"Place your Attackerr":2==a?"Place your Ship":"Play",s&&f){console.log(t.board);const o=n(e[a]);t.placeShip(o,d);for(let t=0;t<e[a];t++)document.querySelector(`.h${d+t}`).style.backgroundColor="#292828";a++,a===r&&(c=!1)}}))}))}else if("computer"===e){const e=[5,4,3,2];let r=e.length,l=0;for(;l<r;){let r=n(e[l]),c=Math.floor(100*Math.random());o(c,e[l])&&(t.placeShip(r,c),l++)}}}function o(e,t){let n=e+t-1,r=Math.floor(e/10);return!(Math.floor(n/10)>r)}!function(n,o){let l,c;c=t(),l=t();const a=[],u=document.getElementById("playerboard"),i=document.getElementById("compboard");e(u,"player"),e(i,"computer"),r("player",c),r("computer",l);let d=new Set,s=n,f=!1;function h(e){if(f)return;const t=e.target.dataset.index,n=l.receiveAttack(t);e.target.style.backgroundColor=!0===n?"#f70202":"#02d91b"}function m(){if(f)return;let e=Math.floor(100*Math.random());for(;d.has(e);)e=Math.floor(100*Math.random());const t=c.receiveAttack(e);u.querySelector(`[data-index='${e}']`).style.backgroundColor=!0===t?"#f70202":"#02d91b",d.add(e),y(),s=p()}function p(){return s=s===n?o:n}function y(){return c.allShipsSunk()?(f=!0,document.getElementById("winner").innerText="Computer Win!",void i.removeEventListener("click",h)):l.allShipsSunk()?(f=!0,void(document.getElementById("winner").innerText="You Win!")):void 0}document.querySelectorAll(".cell"),i.addEventListener("click",(e=>{const t=function(e){const t=e.target.dataset.index;return!a.includes(t)&&(a.push(t),!0)}(e);if(t){if(s!==n||f)return;h(e),y(),s=p(),setTimeout(m,500)}}))}({name:"Player"},{name:"Computer"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L3NoaXAuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvcGxhY2VzaGlwcy5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9nYW1lbG9vcC5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkb00gPSAoKCk9PntcclxuICAgIGZ1bmN0aW9uIHJlbmRlckJvYXJkKGJvYXJkRWxlbWVudCwgaG9sZGVyKSB7XHJcbiAgICAgICAgYm9hcmRFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjZWxsLmRhdGFzZXQuaW5kZXggPSBpO1xyXG4gICAgICAgICAgICBpZihob2xkZXIgPT0gXCJwbGF5ZXJcIil7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChgaCR7aX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGhvbGRlciA9PSBcImNvbXB1dGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdlbmVteWNlbGwnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChgZSR7aX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib2FyZEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2VsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlckJvYXJkXHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZG9NIiwiaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xyXG5mdW5jdGlvbiBHYW1lYm9hcmQoKSB7XHJcbiAgbGV0IGJvYXJkID0gQXJyYXkoMTAwKS5maWxsKG51bGwpO1xyXG4gIGxldCBzaGlwcyA9IFtdO1xyXG4gIGxldCBtaXNzZWRBdHRhY2tzID0gW107XHJcblxyXG5cclxuICBmdW5jdGlvbiBwbGFjZVNoaXAoc2hpcCxpbmRleCkge1xyXG4gICAgbGV0IHNoaXBsZW5ndGggPSBzaGlwLmxlbmd0aDtcclxuICAgIGxldCBjb29yZGluYXRlcyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxzaGlwbGVuZ3RoO2krKyl7XHJcbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goaW5kZXgraSk7XHJcbiAgICB9XHJcbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICAgICAgYm9hcmRbY29vcmRdID0gc2hpcDtcclxuICAgIH0pO1xyXG4gICAgc2hpcHMucHVzaChzaGlwKTtcclxuXHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpIHtcclxuICAgIGlmIChib2FyZFtjb29yZGluYXRlc10gPT09IG51bGwpIHtcclxuICAgICAgbWlzc2VkQXR0YWNrcy5wdXNoKGNvb3JkaW5hdGVzKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGl0U2hpcCA9IGJvYXJkW2Nvb3JkaW5hdGVzXTtcclxuICAgIGhpdFNoaXAuaGl0KCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFsbFNoaXBzU3VuaygpIHtcclxuICAgIGNvbnNvbGUubG9nKHNoaXBzLmV2ZXJ5KHNoaXAgPT4gc2hpcC5pc1N1bmsoKSkpXHJcbiAgICByZXR1cm4gc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLmlzU3VuaygpKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZ2V0Qm9hcmQoKXtcclxuICAgIHJldHVybiBib2FyZDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBib2FyZCxcclxuICAgIGdldEJvYXJkLFxyXG4gICAgcGxhY2VTaGlwLFxyXG4gICAgcmVjZWl2ZUF0dGFjayxcclxuICAgIGFsbFNoaXBzU3VuayxcclxuICAgIG1pc3NlZEF0dGFja3MsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2FtZWJvYXJkOyIsImZ1bmN0aW9uIFNoaXAobGVuZ3RoKSB7XHJcbiAgbGV0IGhpdHMgPSAwO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGVuZ3RoOiBsZW5ndGgsXHJcbiAgICBoaXQoKSB7XHJcbiAgICAgIGhpdHMrK1xyXG4gICAgICByZXR1cm4gaGl0cztcclxuICAgIH0sXHJcbiAgICBpc1N1bmsoKSB7XHJcbiAgICAgIHJldHVybiBoaXRzID09PSBsZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgZ2V0IGhpdHMoKXtcclxuICAgICAgcmV0dXJuIGhpdHM7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBTaGlwOyIsImltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcclxuaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuXHJcbmZ1bmN0aW9uIHBsYWNlc2hpcHMoaG9sZGVyLCBwbGF5ZXJib2FyZCkge1xyXG4gIGlmIChob2xkZXIgPT09IFwicGxheWVyXCIpIHtcclxuICAgIGNvbnN0IHNoaXBzTGVuZ3RoID0gWzUsIDQsIDMsIDJdO1xyXG4gICAgbGV0IHNoaXBzbGVuID0gc2hpcHNMZW5ndGgubGVuZ3RoO1xyXG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xyXG4gICAgbGV0IGdhbWUgPSB0cnVlO1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgdHVybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0dXJuJyk7XHJcbiAgICBjb25zb2xlLmxvZyhpKVxyXG4gICAgaWYgKGdhbWUpIHtcclxuICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChjZWxsLmRhdGFzZXQuaW5kZXgpO1xyXG4gICAgICAgICAgY29uc3QgY2FuUGxhY2VTaGlwID0gY2hlY2tTaGlwUGxhY2VtZW50KHBsYXllcmJvYXJkLCBpbmRleCwgc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICAgICAgY29uc3Qgbm9PdmVybGFwID0gY2hlY2tPdmVybGFwKGluZGV4LCBzaGlwc0xlbmd0aFtpXSk7XHJcbiAgICAgICAgICBpZihpID09MCl7XHJcbiAgICAgICAgICAgIHR1cm4uaW5uZXJUZXh0ID0gXCJQbGFjZSB5b3VyIFN1Ym1hcmluZVwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihpPT0xKXtcclxuICAgICAgICAgICAgdHVybi5pbm5lclRleHQgPSBcIlBsYWNlIHlvdXIgQXR0YWNrZXJyXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGk9PTIpe1xyXG4gICAgICAgICAgICB0dXJuLmlubmVyVGV4dCA9IFwiUGxhY2UgeW91ciBTaGlwXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0dXJuLmlubmVyVGV4dCA9IFwiUGxheVwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNhblBsYWNlU2hpcCAmJiBub092ZXJsYXApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocGxheWVyYm9hcmQuYm9hcmQpO1xyXG4gICAgICAgICAgICBjb25zdCBzaGlwID0gU2hpcChzaGlwc0xlbmd0aFtpXSk7XHJcbiAgICAgICAgICAgIHBsYXllcmJvYXJkLnBsYWNlU2hpcChzaGlwLCBpbmRleCk7ICBcclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzaGlwc0xlbmd0aFtpXTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmgke2luZGV4ICsga31gKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiMyOTI4MjhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGlmIChpID09PSBzaGlwc2xlbikge1xyXG4gICAgICAgICAgICAgIGdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGhvbGRlciA9PT0gXCJjb21wdXRlclwiKSB7XHJcbiAgICBjb25zdCBzaGlwc0xlbmd0aCA9IFs1LCA0LCAzLCAyXTtcclxuICAgIGxldCBzaGlwc2xlbiA9IHNoaXBzTGVuZ3RoLmxlbmd0aDtcclxuICAgIGxldCBpID0gMDtcclxuICAgIFxyXG4gICAgd2hpbGUgKGkgPCBzaGlwc2xlbikge1xyXG4gICAgICBsZXQgc2hpcCA9IFNoaXAoc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgICBjb25zdCBub092ZXJsYXAgPSBjaGVja092ZXJsYXAoaW5kZXgsIHNoaXBzTGVuZ3RoW2ldKTtcclxuXHJcbiAgICAgIGlmICghbm9PdmVybGFwKSB7IC8vIENoZWNrIGlmIHRoZSBzaGlwIGlzIG92ZXJsYXBwaW5nXHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH0gXHJcbiAgICAgIHBsYXllcmJvYXJkLnBsYWNlU2hpcChzaGlwLCBpbmRleCk7XHJcbiAgICAgIGkrKzsgXHJcbiAgICB9ICAgICBcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrT3ZlcmxhcChzdGFydEluZGV4LCBsZW5ndGgpIHtcclxuICBsZXQgbGFzdENlbGxJbmRleCA9IHN0YXJ0SW5kZXggKyBsZW5ndGggLSAxO1xyXG4gIGxldCBpbmRleHJvdyA9IE1hdGguZmxvb3Ioc3RhcnRJbmRleCAvIDEwKTtcclxuICBsZXQgbGFzdHJvdyA9IE1hdGguZmxvb3IobGFzdENlbGxJbmRleCAvIDEwKTtcclxuICBcclxuICBpZiAobGFzdHJvdyA+IGluZGV4cm93KSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1NoaXBQbGFjZW1lbnQocGxheWVyYm9hcmQsIHN0YXJ0SW5kZXgsIGxlbmd0aCkge1xyXG4gIGNvbnN0IGJvYXJkID0gcGxheWVyYm9hcmQuZ2V0Qm9hcmQoKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBpbmRpY2VzID0gc3RhcnRJbmRleCArIGk7XHJcblxyXG4gICAgaWYgKGJvYXJkW2luZGljZXNdICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHBsYWNlc2hpcHMgfTtcclxuIiwiaW1wb3J0IFBsYXllcnMgZnJvbSBcIi4vcGxheWVyXCI7XHJcbmltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcclxuaW1wb3J0IGRvTSBmcm9tIFwiLi9ET01cIjtcclxuaW1wb3J0IHsgcGxhY2VzaGlwcyB9IGZyb20gXCIuL3BsYWNlc2hpcHNcIjtcclxuXHJcbmZ1bmN0aW9uIGdhbWVMb29wKHBsYXllcjEsIHBsYXllcjIpIHtcclxuICBsZXQgY29tcGJvYXJkLCBwbGF5ZXJib2FyZDtcclxuICBwbGF5ZXJib2FyZCA9IEdhbWVib2FyZCgpO1xyXG4gIGNvbXBib2FyZCA9IEdhbWVib2FyZCgpO1xyXG4gIGNvbnN0IGNsaWNrZWRDZWxscyA9IFtdO1xyXG4gIGNvbnN0IHBsYXllcjFib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyYm9hcmRcIik7XHJcbiAgY29uc3QgcGxheWVyMmJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wYm9hcmRcIik7XHJcbiAgZG9NLnJlbmRlckJvYXJkKHBsYXllcjFib2FyZCxcInBsYXllclwiKTtcclxuICBkb00ucmVuZGVyQm9hcmQocGxheWVyMmJvYXJkLCBcImNvbXB1dGVyXCIpO1xyXG5cclxuXHJcbiAgcGxhY2VzaGlwcyhcInBsYXllclwiLHBsYXllcmJvYXJkKTtcclxuICBwbGFjZXNoaXBzKFwiY29tcHV0ZXJcIixjb21wYm9hcmQpO1xyXG5cclxuIFxyXG4gIGxldCBwcmV2aW91c0F0dGFjayA9IG5ldyBTZXQoKTsgLy90byBwcmV2ZW50IHRoZSBjb21wIGZyb20gYXR0YWNraW5nIHRoZSBzYW1lIGluZGV4IHR3aWNlXHJcbiAgbGV0IGN1cnJlbnRQbGF5ZXIgPSBwbGF5ZXIxO1xyXG4gIGxldCBnYW1lT3ZlciA9IGZhbHNlO1xyXG5cclxuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XHJcbiAgXHJcbiAgcGxheWVyMmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgaXN2YWxpZGNsaWNrID0gY2hlY2tEb3VibGUoZSk7XHJcbiAgICBpZihpc3ZhbGlkY2xpY2spe1xyXG4gICAgICBpZiAoY3VycmVudFBsYXllciAhPT0gcGxheWVyMSB8fCBnYW1lT3Zlcikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBoYW5kbGVDbGljayhlKTtcclxuICAgICAgY2hlY2tnYW1lT3ZlcigpO1xyXG4gICAgICBjdXJyZW50UGxheWVyID0gc3dpdGNoUGxheWVyKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoY29tcHV0ZXJUdXJuLCA1MDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfSk7XHJcblxyXG5cclxuICBcclxuICBmdW5jdGlvbiBjaGVja0RvdWJsZShlKXtcclxuICAgIGNvbnN0IGNlbGxpbmRleCA9IGUudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XHJcbiAgICBpZihjbGlja2VkQ2VsbHMuaW5jbHVkZXMoY2VsbGluZGV4KSl7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNsaWNrZWRDZWxscy5wdXNoKGNlbGxpbmRleCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XHJcbiAgICBpZiAoZ2FtZU92ZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2VsbGluZGV4ID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuaW5kZXg7XHJcbiAgICBjb25zdCByZXN1bHQgPSBjb21wYm9hcmQucmVjZWl2ZUF0dGFjayhjZWxsaW5kZXgpO1xyXG4gICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xyXG4gICAgICBldmVudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjcwMjAyXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBldmVudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMDJkOTFiXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wdXRlclR1cm4oKSB7XHJcbiAgICBpZiAoZ2FtZU92ZXIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgd2hpbGUocHJldmlvdXNBdHRhY2suaGFzKHgpKXtcclxuICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb21waGl0ID0gcGxheWVyYm9hcmQucmVjZWl2ZUF0dGFjayh4KTtcclxuICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXIxYm9hcmQucXVlcnlTZWxlY3RvcihgW2RhdGEtaW5kZXg9JyR7eH0nXWApO1xyXG4gICAgaWYgKGNvbXBoaXQgPT09IHRydWUpIHtcclxuICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmNzAyMDJcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjMDJkOTFiXCI7XHJcbiAgICB9XHJcbiAgICBwcmV2aW91c0F0dGFjay5hZGQoeCk7XHJcbiAgICBjaGVja2dhbWVPdmVyKCk7XHJcbiAgICBjdXJyZW50UGxheWVyID0gc3dpdGNoUGxheWVyKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzd2l0Y2hQbGF5ZXIoKSB7XHJcbiAgICByZXR1cm4gKGN1cnJlbnRQbGF5ZXIgPSBjdXJyZW50UGxheWVyID09PSBwbGF5ZXIxID8gcGxheWVyMiA6IHBsYXllcjEpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tnYW1lT3ZlcigpIHtcclxuICAgIGlmIChwbGF5ZXJib2FyZC5hbGxTaGlwc1N1bmsoKSkge1xyXG4gICAgICBnYW1lT3ZlciA9IHRydWU7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5uZXInKS5pbm5lclRleHQgPSBcIkNvbXB1dGVyIFdpbiFcIjtcclxuICAgICAgcGxheWVyMmJvYXJkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVDbGljayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChjb21wYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyJykuaW5uZXJUZXh0ID0gXCJZb3UgV2luIVwiO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBnYW1lTG9vcDtcclxuIiwiaW1wb3J0IGRvTSBmcm9tIFwiLi9ET01cIjtcclxuaW1wb3J0IFBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcclxuaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xyXG5pbXBvcnQgZ2FtZUxvb3AgZnJvbSBcIi4vZ2FtZWxvb3BcIjtcclxuXHJcblxyXG5nYW1lTG9vcCh7bmFtZTogXCJQbGF5ZXJcIn0sIHtuYW1lOiBcIkNvbXB1dGVyXCJ9KTtcclxuIl0sIm5hbWVzIjpbImJvYXJkRWxlbWVudCIsImhvbGRlciIsImlubmVySFRNTCIsImkiLCJjZWxsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZGF0YXNldCIsImluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJib2FyZCIsIkFycmF5IiwiZmlsbCIsInNoaXBzIiwibWlzc2VkQXR0YWNrcyIsImdldEJvYXJkIiwicGxhY2VTaGlwIiwic2hpcCIsInNoaXBsZW5ndGgiLCJsZW5ndGgiLCJjb29yZGluYXRlcyIsInB1c2giLCJmb3JFYWNoIiwiY29vcmQiLCJyZWNlaXZlQXR0YWNrIiwiaGl0IiwiYWxsU2hpcHNTdW5rIiwiY29uc29sZSIsImxvZyIsImV2ZXJ5IiwiaXNTdW5rIiwiaGl0cyIsInBsYWNlc2hpcHMiLCJwbGF5ZXJib2FyZCIsInNoaXBzTGVuZ3RoIiwic2hpcHNsZW4iLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJnYW1lIiwidHVybiIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwicGFyc2VJbnQiLCJjYW5QbGFjZVNoaXAiLCJzdGFydEluZGV4IiwiY2hlY2tTaGlwUGxhY2VtZW50Iiwibm9PdmVybGFwIiwiY2hlY2tPdmVybGFwIiwiaW5uZXJUZXh0IiwiayIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxhc3RDZWxsSW5kZXgiLCJpbmRleHJvdyIsInBsYXllcjEiLCJwbGF5ZXIyIiwiY29tcGJvYXJkIiwiY2xpY2tlZENlbGxzIiwicGxheWVyMWJvYXJkIiwicGxheWVyMmJvYXJkIiwicHJldmlvdXNBdHRhY2siLCJTZXQiLCJjdXJyZW50UGxheWVyIiwiZ2FtZU92ZXIiLCJoYW5kbGVDbGljayIsImNlbGxpbmRleCIsInJlc3VsdCIsImNvbXB1dGVyVHVybiIsIngiLCJoYXMiLCJjb21waGl0IiwiY2hlY2tnYW1lT3ZlciIsInN3aXRjaFBsYXllciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwiaXN2YWxpZGNsaWNrIiwiaW5jbHVkZXMiLCJjaGVja0RvdWJsZSIsInNldFRpbWVvdXQiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==