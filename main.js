(()=>{"use strict";const e=function(e,t){e.innerHTML="";for(let n=0;n<100;n++){const r=document.createElement("div");r.dataset.index=n,"player"==t?(r.classList.add("cell"),r.classList.add(`h${n}`)):"computer"==t&&(r.classList.add("enemycell"),r.classList.add(`e${n}`)),e.appendChild(r)}},t=function(){let e=Array(100).fill(null),t=[],n=[];return{board:e,getBoard:function(){return e},placeShip:function(n,r){let o=n.length,l=[];for(let e=0;e<o;e++)l.push(r+e);l.forEach((t=>{e[t]=n})),t.push(n)},receiveAttack:function(t){return null===e[t]?(n.push(t),!1):(e[t].hit(),!0)},allShipsSunk:function(){return console.log(t.every((e=>e.isSunk()))),t.every((e=>e.isSunk()))},missedAttacks:n}},n=function(e){let t=0;return{length:e,hit:()=>(t++,t),isSunk:()=>t===e,get hits(){return t}}};function r(e,t){if("player"===e){const e=[5,4,3,2];let r=e.length;const l=document.querySelectorAll(".cell");let c=!0,a=0;const u=document.getElementById("turn");console.log(a),c&&l.forEach((l=>{l.addEventListener("click",(l=>{const i=l.target,s=parseInt(i.dataset.index),d=function(e,t,n){const r=e.getBoard();for(let e=0;e<n;e++)if(null!==r[t+e])return!1;return!0}(t,s,e[a]),f=o(s,e[a]);if(u.innerText=0==a?"Place your Submarine":1==a?"Place your Attackerr":2==a?"Place your Ship":"Play",d&&f){console.log(t.board);const o=n(e[a]);t.placeShip(o,s);for(let t=0;t<e[a];t++)document.querySelector(`.h${s+t}`).style.backgroundColor="blue";a++,a===r&&(c=!1)}}))}))}else if("computer"===e){const e=[5,4,3,2];let r=e.length,l=0;for(;l<r;){let r=n(e[l]),c=Math.floor(100*Math.random());o(c,e[l])&&(t.placeShip(r,c),l++)}}}function o(e,t){let n=e+t-1,r=Math.floor(e/10);return!(Math.floor(n/10)>r)}!function(n,o){let l,c;c=t(),l=t();const a=[],u=document.getElementById("playerboard"),i=document.getElementById("compboard");e(u,"player"),e(i,"computer"),r("player",c),r("computer",l);let s=new Set,d=n,f=!1;function h(e){if(f)return;const t=e.target.dataset.index,n=l.receiveAttack(t);e.target.style.backgroundColor=!0===n?"#f70202":"#4a4848"}function m(){if(f)return;let e=Math.floor(100*Math.random());for(;s.has(e);)e=Math.floor(100*Math.random());const t=c.receiveAttack(e);u.querySelector(`[data-index='${e}']`).style.backgroundColor=!0===t?"#f70202":"#4a4848",s.add(e),y(),d=p()}function p(){return d=d===n?o:n}function y(){return c.allShipsSunk()?(f=!0,document.getElementById("winner").innerText="Computer Win!",void i.removeEventListener("click",h)):l.allShipsSunk()?(f=!0,void(document.getElementById("winner").innerText="You Win!")):void 0}document.querySelectorAll(".cell"),i.addEventListener("click",(e=>{const t=function(e){const t=e.target.dataset.index;return!a.includes(t)&&(a.push(t),!0)}(e);if(t){if(d!==n||f)return;h(e),y(),d=p(),setTimeout(m,500)}}))}({name:"Player"},{name:"Computer"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL3RoZS1iYXR0bGVzaGlwLy4vc2NyaXB0L3NoaXAuanMiLCJ3ZWJwYWNrOi8vdGhlLWJhdHRsZXNoaXAvLi9zY3JpcHQvcGxhY2VzaGlwcy5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9nYW1lbG9vcC5qcyIsIndlYnBhY2s6Ly90aGUtYmF0dGxlc2hpcC8uL3NjcmlwdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkb00gPSAoKCk9PntcclxuICAgIGZ1bmN0aW9uIHJlbmRlckJvYXJkKGJvYXJkRWxlbWVudCwgaG9sZGVyKSB7XHJcbiAgICAgICAgYm9hcmRFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjZWxsLmRhdGFzZXQuaW5kZXggPSBpO1xyXG4gICAgICAgICAgICBpZihob2xkZXIgPT0gXCJwbGF5ZXJcIil7XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChgaCR7aX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGhvbGRlciA9PSBcImNvbXB1dGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdlbmVteWNlbGwnKTtcclxuICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChgZSR7aX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib2FyZEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2VsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlckJvYXJkXHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZG9NIiwiaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xyXG5mdW5jdGlvbiBHYW1lYm9hcmQoKSB7XHJcbiAgbGV0IGJvYXJkID0gQXJyYXkoMTAwKS5maWxsKG51bGwpO1xyXG4gIGxldCBzaGlwcyA9IFtdO1xyXG4gIGxldCBtaXNzZWRBdHRhY2tzID0gW107XHJcblxyXG5cclxuICBmdW5jdGlvbiBwbGFjZVNoaXAoc2hpcCxpbmRleCkge1xyXG4gICAgbGV0IHNoaXBsZW5ndGggPSBzaGlwLmxlbmd0aDtcclxuICAgIGxldCBjb29yZGluYXRlcyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxzaGlwbGVuZ3RoO2krKyl7XHJcbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goaW5kZXgraSk7XHJcbiAgICB9XHJcbiAgICBjb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkID0+IHtcclxuICAgICAgYm9hcmRbY29vcmRdID0gc2hpcDtcclxuICAgIH0pO1xyXG4gICAgc2hpcHMucHVzaChzaGlwKTtcclxuXHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpIHtcclxuICAgIGlmIChib2FyZFtjb29yZGluYXRlc10gPT09IG51bGwpIHtcclxuICAgICAgbWlzc2VkQXR0YWNrcy5wdXNoKGNvb3JkaW5hdGVzKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGl0U2hpcCA9IGJvYXJkW2Nvb3JkaW5hdGVzXTtcclxuICAgIGhpdFNoaXAuaGl0KCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFsbFNoaXBzU3VuaygpIHtcclxuICAgIGNvbnNvbGUubG9nKHNoaXBzLmV2ZXJ5KHNoaXAgPT4gc2hpcC5pc1N1bmsoKSkpXHJcbiAgICByZXR1cm4gc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLmlzU3VuaygpKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZ2V0Qm9hcmQoKXtcclxuICAgIHJldHVybiBib2FyZDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBib2FyZCxcclxuICAgIGdldEJvYXJkLFxyXG4gICAgcGxhY2VTaGlwLFxyXG4gICAgcmVjZWl2ZUF0dGFjayxcclxuICAgIGFsbFNoaXBzU3VuayxcclxuICAgIG1pc3NlZEF0dGFja3MsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2FtZWJvYXJkOyIsImZ1bmN0aW9uIFNoaXAobGVuZ3RoKSB7XHJcbiAgbGV0IGhpdHMgPSAwO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGVuZ3RoOiBsZW5ndGgsXHJcbiAgICBoaXQoKSB7XHJcbiAgICAgIGhpdHMrK1xyXG4gICAgICByZXR1cm4gaGl0cztcclxuICAgIH0sXHJcbiAgICBpc1N1bmsoKSB7XHJcbiAgICAgIHJldHVybiBoaXRzID09PSBsZW5ndGg7XHJcbiAgICB9LFxyXG4gICAgZ2V0IGhpdHMoKXtcclxuICAgICAgcmV0dXJuIGhpdHM7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBTaGlwOyIsImltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcclxuaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcclxuXHJcbmZ1bmN0aW9uIHBsYWNlc2hpcHMoaG9sZGVyLCBwbGF5ZXJib2FyZCkge1xyXG4gIGlmIChob2xkZXIgPT09IFwicGxheWVyXCIpIHtcclxuICAgIGNvbnN0IHNoaXBzTGVuZ3RoID0gWzUsIDQsIDMsIDJdO1xyXG4gICAgbGV0IHNoaXBzbGVuID0gc2hpcHNMZW5ndGgubGVuZ3RoO1xyXG4gICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xyXG4gICAgbGV0IGdhbWUgPSB0cnVlO1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgdHVybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0dXJuJyk7XHJcbiAgICBjb25zb2xlLmxvZyhpKVxyXG4gICAgaWYgKGdhbWUpIHtcclxuICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChjZWxsLmRhdGFzZXQuaW5kZXgpO1xyXG4gICAgICAgICAgY29uc3QgY2FuUGxhY2VTaGlwID0gY2hlY2tTaGlwUGxhY2VtZW50KHBsYXllcmJvYXJkLCBpbmRleCwgc2hpcHNMZW5ndGhbaV0pO1xyXG4gICAgICAgICAgY29uc3Qgbm9PdmVybGFwID0gY2hlY2tPdmVybGFwKGluZGV4LCBzaGlwc0xlbmd0aFtpXSk7XHJcbiAgICAgICAgICBpZihpID09MCl7XHJcbiAgICAgICAgICAgIHR1cm4uaW5uZXJUZXh0ID0gXCJQbGFjZSB5b3VyIFN1Ym1hcmluZVwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihpPT0xKXtcclxuICAgICAgICAgICAgdHVybi5pbm5lclRleHQgPSBcIlBsYWNlIHlvdXIgQXR0YWNrZXJyXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGk9PTIpe1xyXG4gICAgICAgICAgICB0dXJuLmlubmVyVGV4dCA9IFwiUGxhY2UgeW91ciBTaGlwXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB0dXJuLmlubmVyVGV4dCA9IFwiUGxheVwiO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNhblBsYWNlU2hpcCAmJiBub092ZXJsYXApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocGxheWVyYm9hcmQuYm9hcmQpO1xyXG4gICAgICAgICAgICBjb25zdCBzaGlwID0gU2hpcChzaGlwc0xlbmd0aFtpXSk7XHJcbiAgICAgICAgICAgIHBsYXllcmJvYXJkLnBsYWNlU2hpcChzaGlwLCBpbmRleCk7ICBcclxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBzaGlwc0xlbmd0aFtpXTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmgke2luZGV4ICsga31gKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmx1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gc2hpcHNsZW4pIHtcclxuICAgICAgICAgICAgICBnYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChob2xkZXIgPT09IFwiY29tcHV0ZXJcIikge1xyXG4gICAgY29uc3Qgc2hpcHNMZW5ndGggPSBbNSwgNCwgMywgMl07XHJcbiAgICBsZXQgc2hpcHNsZW4gPSBzaGlwc0xlbmd0aC5sZW5ndGg7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICBcclxuICAgIHdoaWxlIChpIDwgc2hpcHNsZW4pIHtcclxuICAgICAgbGV0IHNoaXAgPSBTaGlwKHNoaXBzTGVuZ3RoW2ldKTtcclxuICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuICAgICAgY29uc3Qgbm9PdmVybGFwID0gY2hlY2tPdmVybGFwKGluZGV4LCBzaGlwc0xlbmd0aFtpXSk7XHJcblxyXG4gICAgICBpZiAoIW5vT3ZlcmxhcCkgeyAvLyBDaGVjayBpZiB0aGUgc2hpcCBpcyBvdmVybGFwcGluZ1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9IFxyXG4gICAgICBwbGF5ZXJib2FyZC5wbGFjZVNoaXAoc2hpcCwgaW5kZXgpO1xyXG4gICAgICBpKys7IFxyXG4gICAgfSAgICAgXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja092ZXJsYXAoc3RhcnRJbmRleCwgbGVuZ3RoKSB7XHJcbiAgbGV0IGxhc3RDZWxsSW5kZXggPSBzdGFydEluZGV4ICsgbGVuZ3RoIC0gMTtcclxuICBsZXQgaW5kZXhyb3cgPSBNYXRoLmZsb29yKHN0YXJ0SW5kZXggLyAxMCk7XHJcbiAgbGV0IGxhc3Ryb3cgPSBNYXRoLmZsb29yKGxhc3RDZWxsSW5kZXggLyAxMCk7XHJcbiAgXHJcbiAgaWYgKGxhc3Ryb3cgPiBpbmRleHJvdykge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tTaGlwUGxhY2VtZW50KHBsYXllcmJvYXJkLCBzdGFydEluZGV4LCBsZW5ndGgpIHtcclxuICBjb25zdCBib2FyZCA9IHBsYXllcmJvYXJkLmdldEJvYXJkKCk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgaW5kaWNlcyA9IHN0YXJ0SW5kZXggKyBpO1xyXG5cclxuICAgIGlmIChib2FyZFtpbmRpY2VzXSAhPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgeyBwbGFjZXNoaXBzIH07XHJcbiIsImltcG9ydCBQbGF5ZXJzIGZyb20gXCIuL3BsYXllclwiO1xyXG5pbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL2dhbWVib2FyZFwiO1xyXG5pbXBvcnQgU2hpcCBmcm9tIFwiLi9zaGlwXCI7XHJcbmltcG9ydCBkb00gZnJvbSBcIi4vRE9NXCI7XHJcbmltcG9ydCB7IHBsYWNlc2hpcHMgfSBmcm9tIFwiLi9wbGFjZXNoaXBzXCI7XHJcblxyXG5mdW5jdGlvbiBnYW1lTG9vcChwbGF5ZXIxLCBwbGF5ZXIyKSB7XHJcbiAgbGV0IGNvbXBib2FyZCwgcGxheWVyYm9hcmQ7XHJcbiAgcGxheWVyYm9hcmQgPSBHYW1lYm9hcmQoKTtcclxuICBjb21wYm9hcmQgPSBHYW1lYm9hcmQoKTtcclxuICBjb25zdCBjbGlja2VkQ2VsbHMgPSBbXTtcclxuICBjb25zdCBwbGF5ZXIxYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllcmJvYXJkXCIpO1xyXG4gIGNvbnN0IHBsYXllcjJib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGJvYXJkXCIpO1xyXG4gIGRvTS5yZW5kZXJCb2FyZChwbGF5ZXIxYm9hcmQsXCJwbGF5ZXJcIik7XHJcbiAgZG9NLnJlbmRlckJvYXJkKHBsYXllcjJib2FyZCwgXCJjb21wdXRlclwiKTtcclxuXHJcblxyXG4gIHBsYWNlc2hpcHMoXCJwbGF5ZXJcIixwbGF5ZXJib2FyZCk7XHJcbiAgcGxhY2VzaGlwcyhcImNvbXB1dGVyXCIsY29tcGJvYXJkKTtcclxuXHJcbiBcclxuICBsZXQgcHJldmlvdXNBdHRhY2sgPSBuZXcgU2V0KCk7IC8vdG8gcHJldmVudCB0aGUgY29tcCBmcm9tIGF0dGFja2luZyB0aGUgc2FtZSBpbmRleCB0d2ljZVxyXG4gIGxldCBjdXJyZW50UGxheWVyID0gcGxheWVyMTtcclxuICBsZXQgZ2FtZU92ZXIgPSBmYWxzZTtcclxuXHJcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xyXG4gIFxyXG4gIHBsYXllcjJib2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGNvbnN0IGlzdmFsaWRjbGljayA9IGNoZWNrRG91YmxlKGUpO1xyXG4gICAgaWYoaXN2YWxpZGNsaWNrKXtcclxuICAgICAgaWYgKGN1cnJlbnRQbGF5ZXIgIT09IHBsYXllcjEgfHwgZ2FtZU92ZXIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaGFuZGxlQ2xpY2soZSk7XHJcbiAgICAgIGNoZWNrZ2FtZU92ZXIoKTtcclxuICAgICAgY3VycmVudFBsYXllciA9IHN3aXRjaFBsYXllcigpO1xyXG4gICAgICBzZXRUaW1lb3V0KGNvbXB1dGVyVHVybiwgNTAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0pO1xyXG5cclxuXHJcbiAgXHJcbiAgZnVuY3Rpb24gY2hlY2tEb3VibGUoZSl7XHJcbiAgICBjb25zdCBjZWxsaW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgaWYoY2xpY2tlZENlbGxzLmluY2x1ZGVzKGNlbGxpbmRleCkpe1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjbGlja2VkQ2VsbHMucHVzaChjZWxsaW5kZXgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGNlbGxpbmRleCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gY29tcGJvYXJkLnJlY2VpdmVBdHRhY2soY2VsbGluZGV4KTtcclxuICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y3MDIwMlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY29tcHV0ZXJUdXJuKCkge1xyXG4gICAgaWYgKGdhbWVPdmVyKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTtcclxuICAgIHdoaWxlKHByZXZpb3VzQXR0YWNrLmhhcyh4KSl7XHJcbiAgICAgIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29tcGhpdCA9IHBsYXllcmJvYXJkLnJlY2VpdmVBdHRhY2soeCk7XHJcbiAgICBjb25zdCBjZWxsID0gcGxheWVyMWJvYXJkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PScke3h9J11gKTtcclxuICAgIGlmIChjb21waGl0ID09PSB0cnVlKSB7XHJcbiAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjcwMjAyXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzRhNDg0OFwiO1xyXG4gICAgfVxyXG4gICAgcHJldmlvdXNBdHRhY2suYWRkKHgpO1xyXG4gICAgY2hlY2tnYW1lT3ZlcigpO1xyXG4gICAgY3VycmVudFBsYXllciA9IHN3aXRjaFBsYXllcigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3dpdGNoUGxheWVyKCkge1xyXG4gICAgcmV0dXJuIChjdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllciA9PT0gcGxheWVyMSA/IHBsYXllcjIgOiBwbGF5ZXIxKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrZ2FtZU92ZXIoKSB7XHJcbiAgICBpZiAocGxheWVyYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcclxuICAgICAgZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyJykuaW5uZXJUZXh0ID0gXCJDb21wdXRlciBXaW4hXCI7XHJcbiAgICAgIHBsYXllcjJib2FyZC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2spO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoY29tcGJvYXJkLmFsbFNoaXBzU3VuaygpKSB7XHJcbiAgICAgIGdhbWVPdmVyID0gdHJ1ZTtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbm5lcicpLmlubmVyVGV4dCA9IFwiWW91IFdpbiFcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZ2FtZUxvb3A7XHJcbiIsImltcG9ydCBkb00gZnJvbSBcIi4vRE9NXCI7XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XHJcbmltcG9ydCBHYW1lYm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XHJcbmltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBcIjtcclxuaW1wb3J0IGdhbWVMb29wIGZyb20gXCIuL2dhbWVsb29wXCI7XHJcblxyXG5cclxuZ2FtZUxvb3Aoe25hbWU6IFwiUGxheWVyXCJ9LCB7bmFtZTogXCJDb21wdXRlclwifSk7XHJcbiJdLCJuYW1lcyI6WyJib2FyZEVsZW1lbnQiLCJob2xkZXIiLCJpbm5lckhUTUwiLCJpIiwiY2VsbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRhdGFzZXQiLCJpbmRleCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwiYm9hcmQiLCJBcnJheSIsImZpbGwiLCJzaGlwcyIsIm1pc3NlZEF0dGFja3MiLCJnZXRCb2FyZCIsInBsYWNlU2hpcCIsInNoaXAiLCJzaGlwbGVuZ3RoIiwibGVuZ3RoIiwiY29vcmRpbmF0ZXMiLCJwdXNoIiwiZm9yRWFjaCIsImNvb3JkIiwicmVjZWl2ZUF0dGFjayIsImhpdCIsImFsbFNoaXBzU3VuayIsImNvbnNvbGUiLCJsb2ciLCJldmVyeSIsImlzU3VuayIsImhpdHMiLCJwbGFjZXNoaXBzIiwicGxheWVyYm9hcmQiLCJzaGlwc0xlbmd0aCIsInNoaXBzbGVuIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZ2FtZSIsInR1cm4iLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsInBhcnNlSW50IiwiY2FuUGxhY2VTaGlwIiwic3RhcnRJbmRleCIsImNoZWNrU2hpcFBsYWNlbWVudCIsIm5vT3ZlcmxhcCIsImNoZWNrT3ZlcmxhcCIsImlubmVyVGV4dCIsImsiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsYXN0Q2VsbEluZGV4IiwiaW5kZXhyb3ciLCJwbGF5ZXIxIiwicGxheWVyMiIsImNvbXBib2FyZCIsImNsaWNrZWRDZWxscyIsInBsYXllcjFib2FyZCIsInBsYXllcjJib2FyZCIsInByZXZpb3VzQXR0YWNrIiwiU2V0IiwiY3VycmVudFBsYXllciIsImdhbWVPdmVyIiwiaGFuZGxlQ2xpY2siLCJjZWxsaW5kZXgiLCJyZXN1bHQiLCJjb21wdXRlclR1cm4iLCJ4IiwiaGFzIiwiY29tcGhpdCIsImNoZWNrZ2FtZU92ZXIiLCJzd2l0Y2hQbGF5ZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImlzdmFsaWRjbGljayIsImluY2x1ZGVzIiwiY2hlY2tEb3VibGUiLCJzZXRUaW1lb3V0IiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=